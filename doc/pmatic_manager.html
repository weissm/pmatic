
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>The pmatic Manager &#8212; pmatic 0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
    <script src="_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
    <script src="_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced things" href="advanced.html" />
    <link rel="prev" title="Manage your Residents" href="pmatic_residents.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced.html" title="Advanced things"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pmatic_residents.html" title="Manage your Residents"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pmatic 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-pmatic-manager">
<h1>The pmatic Manager<a class="headerlink" href="#the-pmatic-manager" title="Permalink to this headline">¶</a></h1>
<p>One component of pmatic is the pmatic Manager. It has been created to make the management of your
pmatic on the CCU easier. It provides a dedicated web GUI to upload and manage your scripts. It
is possible to execute them manually for testing purposes and you can also create schedules to
let the manager execute your scripts on startup of the manager, based on time or based on device
events received from the CCU.</p>
<a class=""
               data-lightbox="group-77be072f-2c43-4ca3-96bc-408a2704d262"
               href="_images/manage_scripts.png"
               title="Manage your pmatic Scripts on the CCU"
               data-title="Manage your pmatic Scripts on the CCU"
               ><img src="_images/manage_scripts.png"
                     class="align-center"
                     width="auto"
                     height="auto"
                     alt=""/>
                </a><div class="section" id="features-of-the-manager">
<h2>Features of the Manager<a class="headerlink" href="#features-of-the-manager" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Upload and delete pmatic scripts</p></li>
<li><p>Execute scripts from the web browser</p></li>
<li><p>Schedule automatic script execution</p>
<ul>
<li><p>On startup of the manager</p></li>
<li><p>After initializing connection with the CCU</p></li>
<li><p>Based on time (daily, weekly, …)</p></li>
<li><p>Based on events received from the CCU (like a specific parameter was updated or changed)</p></li>
</ul>
</li>
<li><p>Also configurable via web GUI</p></li>
<li><p>Password protected access</p></li>
<li><p>Small diagnose tools</p>
<ul>
<li><p>Last X CCU events can be viewed</p></li>
<li><p>Shows a detailed status information about the connection with the CCU</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-to-access-the-manager">
<h2>How to access the Manager?<a class="headerlink" href="#how-to-access-the-manager" title="Permalink to this headline">¶</a></h2>
<p>After installing pmatic on your CCU, you can open your browser and open the URL
<code class="docutils literal notranslate"><span class="pre">http://[CCU_ADDRESS]:9120/</span></code>. Please remember to replace the <code class="docutils literal notranslate"><span class="pre">[CCU_ADDRESS]</span></code> by the real
address of your CCU. For me this is the host name <code class="docutils literal notranslate"><span class="pre">ccu</span></code>, but it might be another host name
for you. You can even use the IP address of your CCU.</p>
<p>Once inserted, you should see the pmatic Manager GUI. Your first step should be to set
a login password for the Manager on the <em>Configuration</em> page. Future accesses will be
protected by this password.</p>
</div>
<div class="section" id="script-management">
<h2>Script Management<a class="headerlink" href="#script-management" title="Permalink to this headline">¶</a></h2>
<p>The pmatic Manager gives you the option to upload your pmatic scripts from your computer
to the CCU using the web browser. It is also possible to start the scripts right from
the script list.</p>
<a class=""
               data-lightbox="group-f79fec0b-36a3-407b-adeb-d02a40847ce8"
               href="_images/manage_scripts.png"
               title="Manage your pmatic Scripts on the CCU"
               data-title="Manage your pmatic Scripts on the CCU"
               ><img src="_images/manage_scripts.png"
                     class=""
                     width="auto"
                     height="auto"
                     alt=""/>
                </a><p>You are totally free to use this feature. If you are more comfortable with the command
line, you can also copy your scripts manually, e.g. via SSH, to the script path
<code class="docutils literal notranslate"><span class="pre">/etc/config/addons/pmatic/scripts</span></code> on your CCU.</p>
<p>If you like you can also edit your scripts in place in this directory. All changes are
reflected immediately on the next execution of the script. You don’t need to restart
anything. If you like to rename your scripts, you can also do this on the command line.
Also no need to restart anything.</p>
</div>
<div class="section" id="execute-scripts-manually">
<h2>Execute Scripts Manually<a class="headerlink" href="#execute-scripts-manually" title="Permalink to this headline">¶</a></h2>
<p>You can start any script of your choice using the Manager. Simply choose your script
from the script list and click on the “bolt” icon on the left side of the filename.</p>
<p>You will be redirected to the <em>Execute Scripts</em> page which will immediately display
you the output produced by the script during execution and the final exit code on
completion.</p>
<a class=""
               data-lightbox="group-409a0f32-2787-42f7-a610-e10e973285cb"
               href="_images/manually_execute_scripts.png"
               title="Execute your scripts manually and see the result. Good for testing."
               data-title="Execute your scripts manually and see the result. Good for testing."
               ><img src="_images/manually_execute_scripts.png"
                     class=""
                     width="auto"
                     height="auto"
                     alt=""/>
                </a><p>You can also choose a script to be executed directly on the <em>Execute Scripts</em> page.</p>
</div>
<div class="section" id="automatically-execute-scripts">
<h2>Automatically Execute Scripts<a class="headerlink" href="#automatically-execute-scripts" title="Permalink to this headline">¶</a></h2>
<p>The Manager can be used to trigger your scripts in specific situations.</p>
<a class=""
               data-lightbox="group-611c8c4a-d620-4207-b80d-3190ca8aa6cc"
               href="_images/schedule_scripts.png"
               title="Let the pmatic Manager automatically start your scripts."
               data-title="Let the pmatic Manager automatically start your scripts."
               ><img src="_images/schedule_scripts.png"
                     class=""
                     width="auto"
                     height="auto"
                     alt=""/>
                </a><p>It is, for example, possible to let the manager execute an endless running script
which is doing some interesting stuff during it’s run time, right after startup
of the manager. Or, if the script depends on the CCU state, after initialization
of the CCU connection.</p>
<p>If you want a script to be executed on a regular base, for example daily at a given
time, you can use the execution <em>based on time</em>. It currently supports the modes
<em>daily</em>, <em>weekly</em> on a weekday of your choice or <em>monthly</em> on a given day of the month.
For each of the day choices you can choose the time of the day to execute the script.
This is not feature complete, it might be extended in the future to make it more flexible.</p>
<p>Another important option is to listen for events of specific devices and make the
manager execute scripts when either a value is updated or changed. For this you need
to choose the device, channel, parameter and the event type.</p>
</div>
<div class="section" id="manage-your-residents">
<h2>Manage your Residents<a class="headerlink" href="#manage-your-residents" title="Permalink to this headline">¶</a></h2>
<p>You can manage your residents by configuring your residents using the GUI and then access the
residents configured attributes like email address, mobile number or pushover tokens from your
own pmatic scripts. You can use external sources like the fritz!Box to update the presence of
your users.</p>
<a class=""
               data-lightbox="group-07907dd9-7910-4aec-ae5b-e0927842eda6"
               href="_images/residents_presence.png"
               title="Residents in the pmatic Manager"
               data-title="Residents in the pmatic Manager"
               ><img src="_images/residents_presence.png"
                     class=""
                     width="auto"
                     height="auto"
                     alt=""/>
                </a><p>You can find more details about this in the <a class="reference internal" href="pmatic_residents.html#presence-detection"><span class="std std-ref">Presence detection with pmatic</span></a> chapter.</p>
</div>
<div class="section" id="view-device-events">
<h2>View Device Events<a class="headerlink" href="#view-device-events" title="Permalink to this headline">¶</a></h2>
<p>The device event log shows the last 1000 events received from the CCU by default. This
limit can be configured on the <em>Configuration</em> page, if you like it to show more events.
These are events which you can register your pmatic scripts on to be called once such an
event is received.</p>
<a class=""
               data-lightbox="group-a185f002-f7de-4bbc-9217-9742a1637ee2"
               href="_images/view_events.png"
               title="Have a look at the last events received from the CCU."
               data-title="Have a look at the last events received from the CCU."
               ><img src="_images/view_events.png"
                     class=""
                     width="auto"
                     height="auto"
                     alt=""/>
                </a></div>
<div class="section" id="configure-the-manager">
<h2>Configure the Manager<a class="headerlink" href="#configure-the-manager" title="Permalink to this headline">¶</a></h2>
<p>All options of the Manager can be configured via the Web GUI.</p>
<a class=""
               data-lightbox="group-4924751f-2538-4d3d-8669-5b34fa3c805a"
               href="_images/configure_manager.png"
               title="Configuration of the pmatic Manager"
               data-title="Configuration of the pmatic Manager"
               ><img src="_images/configure_manager.png"
                     class=""
                     width="auto"
                     height="auto"
                     alt=""/>
                </a></div>
<div class="section" id="view-the-state-of-the-manager">
<h2>View the State of the Manager<a class="headerlink" href="#view-the-state-of-the-manager" title="Permalink to this headline">¶</a></h2>
<p>The overall health of the manager can be viewed on the state page. It shows you whether or
not the connection with the CCU components is alive, the number of found devices and channels
together with other useful debugging information.</p>
<a class=""
               data-lightbox="group-8f8a0a36-5e15-4345-a74c-64e5220db676"
               href="_images/state.png"
               title="State of the pmatic Manager"
               data-title="State of the pmatic Manager"
               ><img src="_images/state.png"
                     class=""
                     width="auto"
                     height="auto"
                     alt=""/>
                </a><p>If there is a connection problem or a configuration issue and the manager can not connect
to the CCU, this page will show you the error message.</p>
<p>When the information on this page is not enough, you should take a look at the log file
Configuration Configuration of the manager which is located at <code class="docutils literal notranslate"><span class="pre">/var/log/pmatic-manager.log</span></code>
on your CCU.</p>
</div>
<div class="section" id="starting-stopping-and-restarting-the-manager">
<h2>Starting, Stopping and Restarting the Manager<a class="headerlink" href="#starting-stopping-and-restarting-the-manager" title="Permalink to this headline">¶</a></h2>
<p>When installed via the CCU package on the CCU, the Manager comes together with an Init-Script
which starts the Manager on startup and stopps it when shutting down or restarting the CCU.</p>
<p>If you like to control the process manually, you can use this script to start, stop or restart
the Manager process.</p>
<p>The script is located at <code class="docutils literal notranslate"><span class="pre">/etc/init.d/S55pmatic</span></code>. So if you like you can use
<code class="docutils literal notranslate"><span class="pre">/etc/init.d/S55pmatic</span> <span class="pre">restart</span></code> to restart the pmatic Manager process.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The pmatic Manager</a><ul>
<li><a class="reference internal" href="#features-of-the-manager">Features of the Manager</a></li>
<li><a class="reference internal" href="#how-to-access-the-manager">How to access the Manager?</a></li>
<li><a class="reference internal" href="#script-management">Script Management</a></li>
<li><a class="reference internal" href="#execute-scripts-manually">Execute Scripts Manually</a></li>
<li><a class="reference internal" href="#automatically-execute-scripts">Automatically Execute Scripts</a></li>
<li><a class="reference internal" href="#manage-your-residents">Manage your Residents</a></li>
<li><a class="reference internal" href="#view-device-events">View Device Events</a></li>
<li><a class="reference internal" href="#configure-the-manager">Configure the Manager</a></li>
<li><a class="reference internal" href="#view-the-state-of-the-manager">View the State of the Manager</a></li>
<li><a class="reference internal" href="#starting-stopping-and-restarting-the-manager">Starting, Stopping and Restarting the Manager</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pmatic_residents.html"
                        title="previous chapter">Manage your Residents</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="advanced.html"
                        title="next chapter">Advanced things</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pmatic_manager.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced.html" title="Advanced things"
             >next</a> |</li>
        <li class="right" >
          <a href="pmatic_residents.html" title="Manage your Residents"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pmatic 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Lars Michelsen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.2.
    </div>
  </body>
</html>